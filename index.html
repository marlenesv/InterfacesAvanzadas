<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>TechLens AR | L√≠nea del Tiempo Tecnol√≥gica</title>
    
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        /* --- ESTILO GENERAL --- */
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            color: #1a1a1a;
        }

        /* --- PANTALLA DE BIENVENIDA --- */
        #welcome-screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #ffffff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            text-align: center;
            padding: 20px;
            transition: opacity 0.8s ease;
        }

        h1 {
            font-weight: 600;
            letter-spacing: -1.5px;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        p.subtitle {
            color: #666;
            font-weight: 300;
            font-size: 1.1rem;
            margin-bottom: 40px;
            max-width: 320px;
            line-height: 1.5;
        }

        .btn-start {
            background: #000;
            color: #fff;
            border: none;
            padding: 18px 50px;
            font-size: 0.9rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 1px;
            text-transform: uppercase;
            font-weight: 600;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .btn-start:hover {
            transform: scale(1.05);
            background: #333;
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }

        /* --- TARJETA DE INFORMACI√ìN FLOTANTE --- */
        #info-card {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            width: 85%;
            max-width: 380px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
            display: none;
            z-index: 5000;
            border: 1px solid rgba(255,255,255,0.8);
        }

        /* --- BARRA DE PROGRESO (L√çNEA DEL TIEMPO) --- */
        .timeline-container {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 85%;
            max-width: 380px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px 20px;
            z-index: 4000;
            display: none;
        }

        .timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .timeline-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: #333;
        }

        .timeline-counter {
            font-size: 0.8rem;
            color: #666;
        }

        .timeline-bar {
            width: 100%;
            height: 6px;
            background: rgba(0,0,0,0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .timeline-progress {
            height: 100%;
            background: linear-gradient(90deg, #00c853, #00e676);
            border-radius: 3px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .tag {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #888;
            margin-bottom: 10px;
            display: block;
            font-weight: 600;
        }

        .card-title {
            font-size: 1.8rem;
            margin: 0 0 12px 0;
            font-weight: 600;
            letter-spacing: -1px;
            line-height: 1.1;
        }

        .card-text {
            font-size: 1rem;
            line-height: 1.6;
            color: #555;
            margin-bottom: 25px;
            font-weight: 300;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        .btn-nav {
            flex: 1;
            background: transparent;
            border: 1px solid #000;
            color: #000;
            padding: 12px 25px;
            border-radius: 30px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }
        
        .btn-nav:hover {
            background: #000;
            color: white;
        }

        .btn-nav:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .btn-nav:disabled:hover {
            background: transparent;
            color: #000;
        }
    </style>
</head>

<body>

    <div id="welcome-screen">
        <h1>TechLens AR</h1>
        <p class="subtitle">Explora la evoluci√≥n tecnol√≥gica a trav√©s de una l√≠nea del tiempo interactiva en realidad aumentada.</p>
        <button class="btn-start" onclick="startExperience()">Iniciar L√≠nea del Tiempo</button>
    </div>

    <!-- Barra de progreso de la l√≠nea del tiempo -->
    <div class="timeline-container" id="timeline-container">
        <div class="timeline-header">
            <span class="timeline-title">L√çNEA DEL TIEMPO TECNOL√ìGICA</span>
            <span class="timeline-counter" id="timeline-counter">1/7</span>
        </div>
        <div class="timeline-bar">
            <div class="timeline-progress" id="timeline-progress"></div>
        </div>
    </div>

    <!-- Tarjeta de informaci√≥n principal -->
    <div id="info-card">
        <span class="tag" id="data-tag">1971</span>
        <h2 class="card-title" id="data-title">Primer Microprocesador</h2>
        <p class="card-text" id="data-desc">
            Intel 4004 - El primer microprocesador comercial. Conten√≠a 2,300 transistores y ejecutaba 60,000 operaciones por segundo.
        </p>
        <div class="nav-buttons">
            <button class="btn-nav" id="btn-prev" onclick="prevEvent()" disabled>Anterior</button>
            <button class="btn-nav" id="btn-next" onclick="nextEvent()">Siguiente</button>
        </div>
    </div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;">

        <a-light type="ambient" color="#FFFFFF" intensity="0.8"></a-light>
        <a-light type="directional" color="#FFFFFF" intensity="0.8" position="2 4 3"></a-light>
        <a-light type="point" color="#FFFFFF" intensity="0.5" position="0 3 0"></a-light>
        
        <a-assets>
            <!-- Agregar m√°s modelos para la l√≠nea del tiempo -->
            <a-asset-item id="microchip-model" src="assets/models/intel4004fbx.glb"></a-asset-item>
            <a-asset-item id="pc-model" src="assets/models/pc.glb"></a-asset-item>
            <a-asset-item id="floppy-model" src="assets/models/floppy.glb"></a-asset-item>
            <a-asset-item id="smartphone-model" src="assets/models/smartphone.glb"></a-asset-item>
            <a-asset-item id="ai-model" src="assets/models/ai.glb"></a-asset-item>
            <a-asset-item id="macintosh-model" src="assets/models/macintosh.glb"></a-asset-item>
            <a-asset-item id="www-model" src="assets/models/www.glb"></a-asset-item>

        </a-assets>

        <a-marker preset="hiro" id="main-marker">
            
            <!-- Todos los modelos, inicialmente ocultos excepto el primero -->
            <a-entity id="entity-microchip" gltf-model="#microchip-model" scale="5 5 5" rotation="0 0 0"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 15000; easing: linear">
            </a-entity>

            <a-entity id="entity-pc" gltf-model="#pc-model" scale="0.5 0.5 0.5" rotation="0 45 0" visible="false"
                animation="property: rotation; to: 0 405 0; loop: true; dur: 20000; easing: linear">
            </a-entity>

            <a-entity id="entity-floppy" gltf-model="#floppy-model" scale="3 3 3" rotation="0 0 0" visible="false"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 10000; easing: linear">
            </a-entity>

            <a-entity id="entity-smartphone" gltf-model="#smartphone-model" scale="0.5 0.5 0.5" rotation="0 0 0" visible="false"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 12000; easing: linear">
            </a-entity>

            <a-entity id="entity-ai" gltf-model="#ai-model" scale="1 1 1" position="0 0.1 0" rotation="0 0 0" visible="false"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 15000; easing: linear">
            </a-entity>

            <a-entity id="entity-www" gltf-model="#www-model" scale="0.03 0.03 0.03" position="0 0.1 0" rotation="0 30 0" visible="false"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 18000; easing: linear">
            </a-entity>

            <a-entity id="entity-mac" gltf-model="#macintosh-model" scale="0.03 0.03 0.03" position="0 0.1 0" rotation="0 30 0" visible="false"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 18000; easing: linear">
            </a-entity>

        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>

    <script>
        // Base de datos de la l√≠nea del tiempo
        const timelineData = [
            {
                id: 1,
                year: "1971",
                title: "Primer Microprocesador",
                description: "Intel 4004 - El primer microprocesador comercial. Conten√≠a 2,300 transistores y ejecutaba 60,000 operaciones por segundo.",
                model: "entity-microchip"
            },
            {
                id: 2,
                year: "A√±os 80s",
                title: "Disquete 3.5\"",
                description: "La forma universal de guardar datos por d√©cadas. Su capacidad m√°xima era 1.44 MB. ¬°Necesitar√≠as 2,000 de estos para guardar una sola canci√≥n moderna!",
                model: "entity-floppy"
            },
            {
                id: 3,
                year: "1981",
                title: "IBM PC 5150",
                description: "El equipo que defini√≥ el est√°ndar 'PC'. Con procesador Intel 8088, pantalla verde y sin disco duro. ¬°El inicio de la era personal!",
                model: "entity-pc"
            },
            {
                id:4,
                year: "1984",
                title: "Apple Macintosh",
                description: "Primera computadora popular con mouse e interfaz gr√°fica. 'Hello, I'm Macintosh' - cambiando para siempre c√≥mo interactuamos con las PCs.",
                model: "entity-mac"
            },
             {
                id:5,
                year: "1991",
                title: "World Wide Web",
                description:"Tim Berners-Lee inventa la web üåê. Antes internet era solo para cient√≠ficos, ahora cualquiera pod√≠a crear p√°ginas web. El primer sitio web solo ten√≠a texto - ¬°ni una sola imagen!",
                model: "entity-www"
            },
            {
                id: 6,
                year: "2007",
                title: "Primer iPhone",
                description: "Revolucion√≥ la telefon√≠a m√≥vil. Pantalla t√°ctil, internet y aplicaciones en un solo dispositivo. El inicio de la era smartphone.",
                model: "entity-smartphone"
            },
            {
                id: 7,
                year: "Actualidad",
                title: "Inteligencia Artificial",
                description: "Redes neuronales y aprendizaje autom√°tico que transforman industrias completas. Desde asistentes virtuales hasta diagn√≥sticos m√©dicos.",
                model: "entity-ai"
            }
        ];

        let currentEventIndex = 0;
        const totalEvents = timelineData.length;

        // 1. Funci√≥n para iniciar (Quita la bienvenida)
        function startExperience() {
            const welcome = document.getElementById('welcome-screen');
            welcome.style.opacity = '0';
            setTimeout(() => {
                welcome.style.display = 'none';
            }, 800);
        }

        // 2. Referencias a elementos
        const marker = document.querySelector('#main-marker');
        const infoCard = document.getElementById('info-card');
        const timelineContainer = document.getElementById('timeline-container');
        const timelineProgress = document.getElementById('timeline-progress');
        const timelineCounter = document.getElementById('timeline-counter');

        // Elementos para cambiar contenido
        const tagText = document.getElementById('data-tag');
        const titleText = document.getElementById('data-title');
        const descText = document.getElementById('data-desc');
        const btnPrev = document.getElementById('btn-prev');
        const btnNext = document.getElementById('btn-next');

        // 3. Detectar marcadores
        marker.addEventListener('markerFound', () => {
            showUI();
            updateEventDisplay();
        });

        marker.addEventListener('markerLost', () => {
            hideUI();
        });

        // 4. Funciones de navegaci√≥n
        function nextEvent() {
            if (currentEventIndex < totalEvents - 1) {
                currentEventIndex++;
                updateEventDisplay();
            }
        }

        function prevEvent() {
            if (currentEventIndex > 0) {
                currentEventIndex--;
                updateEventDisplay();
            }
        }

        // 5. Actualizar la visualizaci√≥n del evento actual
        function updateEventDisplay() {
            const currentEvent = timelineData[currentEventIndex];
            
            // Actualizar textos
            tagText.innerText = currentEvent.year;
            titleText.innerText = currentEvent.title;
            descText.innerText = currentEvent.description;

            // Actualizar modelos 3D
            timelineData.forEach((event, index) => {
                const entity = document.getElementById(event.model);
                if (entity) {
                    entity.setAttribute('visible', index === currentEventIndex);
                }
            });

            // Actualizar botones de navegaci√≥n
            btnPrev.disabled = currentEventIndex === 0;
            btnNext.disabled = currentEventIndex === totalEvents - 1;
            btnNext.innerText = currentEventIndex === totalEvents - 1 ? "Final" : "Siguiente";

            // Actualizar l√≠nea del tiempo
            updateTimelineProgress();
        }

        // 6. Actualizar barra de progreso
        function updateTimelineProgress() {
            const progress = ((currentEventIndex + 1) / totalEvents) * 100;
            timelineProgress.style.width = `${progress}%`;
            timelineCounter.innerText = `${currentEventIndex + 1}/${totalEvents}`;
        }

        // 7. Mostrar/ocultar interfaz
        function showUI() {
            infoCard.style.display = 'block';
            timelineContainer.style.display = 'block';
            
            // Animaci√≥n suave de entrada
            requestAnimationFrame(() => {
                infoCard.style.opacity = '0';
                infoCard.style.transform = 'translate(-50%, 20px)';
                timelineContainer.style.opacity = '0';
                timelineContainer.style.transform = 'translate(-50%, -20px)';
                
                setTimeout(() => {
                    infoCard.style.transition = 'all 0.6s cubic-bezier(0.22, 1, 0.36, 1)';
                    timelineContainer.style.transition = 'all 0.6s cubic-bezier(0.22, 1, 0.36, 1)';
                    
                    infoCard.style.opacity = '1';
                    infoCard.style.transform = 'translate(-50%, 0)';
                    timelineContainer.style.opacity = '1';
                    timelineContainer.style.transform = 'translate(-50%, 0)';
                }, 50);
            });
        }

        function hideUI() {
            infoCard.style.display = 'none';
            timelineContainer.style.display = 'none';
        }

        // Inicializar
        updateTimelineProgress();
    </script>
</body>
</html>